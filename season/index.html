<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Player - Suomi Poikas Hockey Club</title>
    <link rel="stylesheet" href="/styles.css" />
    <link rel="icon" type="image/png" href="images/finland-flag-icon.png" />

    <script src="/common.js"></script>
    <script src="/rosters.js"></script>
  </head>
  <body>
    <div class="header">
      <h1><a href="/">Suomi Poikas Hockey Club</a></h1>
    </div>
    <div class="container">
      <div class="sidebar">
        <img src="/images/000-placeholder.jpg" alt="Season Photo" />
        <span class="caption">Team Photo</span>
      </div>
      <main>
        <article>
          <h2 id="seasonname">Season Name</h2>
          <p id="description">Description.</p>
          <table id="seasonresults" class="statsheet">
            <tr>
              <th>Wins</th>
              <td>-</td>
            </tr>
            <tr>
              <th>Losses</th>
              <td>-</td>
            </tr>
            <tr>
              <th>Ties/OT Losses</th>
              <td>-</td>
            </tr>
            <tr>
              <th>Playoffs Result</th>
              <td>-</td>
            </tr>
          </table>

          <h2>Roster</h2>
          <table id="roster" class="roster">
            <tr>
              <th width="50">Photo</th>
              <th>Name</th>
              <th width="30">#</th>
              <th width="30">Pos</th>
              <th width="30" class="extra">Ht</th>
              <th width="30" class="extra">Wt</th>
              <th width="30" class="extra">Sh</th>
              <th width="30" class="extra">Yrs</th>
              <th width="30" class="extra">Age</th>
            </tr>
            <tr>
              <td colspan="8" id="rosterTableBody">Loading roster...</td>
            </tr>
          </table>
        </article>
      </main>
    </div>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const year = parseInt(urlParams.get("year"), 10);
      const season = urlParams.get("season");
      const level = urlParams.get("level");

      console.log(year, season, level);

      loadAndDisplayRoster("#roster", {
        year,
        season,
        level,
      }).then(({ team, roster }) => {
        let seasonName = `Suomi Poikas ${team.year} ${team.season} ${team.level}`;
        if (team.aside) seasonName += ` - ${team.aside}`;

        const description = team.description || ``;

        document.getElementById("seasonname").innerText = seasonName;
        document.getElementById("description").innerText = description;
        document.getElementById("seasonresults").innerHTML = `
          <tr>
            <th>Wins</th>
            <td>${team.wins}</td>
          </tr>
          <tr>
            <th>Losses</th>
            <td>${team.losses}</td>
          </tr>
          <tr>
            <th>Ties/OT Losses</th>
            <td>${team.ties}</td>
          </tr>
          <tr>
            <th>Playoffs</th>
            <td>${
              team.playoffs === "champions"
                ? "<span class='champion'>üèÜ League Champions!</span>"
                : team.playoffs === "lost"
                ? "Lost in Playoffs"
                : "-"
            }</td>
          </tr>
        `;
      });
    </script>
  </body>
</html>
